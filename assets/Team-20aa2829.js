import{_ as j,a0 as q,a1 as x,u as H,a as $,r as L,a9 as R,b as u,c as p,d as t,t as r,a2 as l,w as i,F as V,e as N,g as I,E as Y,j as g,i as A,K as G,ab as J,a3 as C,a4 as O,p as Q,k as W}from"./index-c90bc775.js";import{E as X}from"./el-dialog-3c2435f3.js";/* empty css                   */import{E as Z,a as ee}from"./el-form-item-091f8ed7.js";/* empty css                 */import{E as te}from"./el-select-a179422f.js";import{g as ae,u as se,c as oe,r as le,i as ie,_ as ne}from"./team-8c8e97a4.js";import{o as re}from"./tool-bfaf8bdc.js";import{E as M}from"./el-loading-4ef5b790.js";import"./castArray-2def1d6a.js";import"./_initCloneObject-d01ac546.js";import"./strings-c1304485.js";import"./isEqual-44e6bdeb.js";import"./index-066c6226.js";const d=b=>(Q("data-v-3f716426"),b=b(),W(),b),de={class:"flex-between mb24"},me={class:"title"},ce=d(()=>t("svg",{class:"icon mr8","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-chuangjian"})],-1)),ue={class:"content"},pe={class:"flex-between mb16",style:{height:"32px"}},_e={class:"second-title"},ve={class:"flex"},fe=["onClick"],ge=d(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-bianji"})],-1)),be=[ge],he=["onClick"],ke=d(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-yaoqing"})],-1)),ye=[ke],$e=["onClick"],Ve=d(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-Logout"})],-1)),Ce=[Ve],Se={class:"mb16"},Te={class:"label mr8"},Ee={class:"member"},we={class:"label"},Ne={class:"con small-scrollbar"},Ie={key:0,class:"nodata"},Me=d(()=>t("img",{src:ne,alt:""},null,-1)),ze=d(()=>t("span",null,"No team",-1)),Be=[Me,ze],Ue={class:"between"},Pe=d(()=>t("div",null,null,-1)),De={class:"between"},Fe=d(()=>t("div",null,null,-1)),Ke={__name:"Team",setup(b){const{t:f}=q(),z=x();H();const a=$({visible:!1,name:"",url:"",id:""}),m=$({total:0,pageNum:1,pageSize:10}),h=L([]),_=()=>{const e=M.service();ae({page:m.pageNum}).then(s=>{h.value=s.results||[],m.total=s.count}).finally(s=>{e.close()})},B=()=>{a.name="",a.url="",a.id="",a.visible=!0},U=e=>{a.name=e.team_name,a.url=e.team_url,a.id=e.id,a.visible=!0},P=()=>{const e=M.service();(a.id?se(a.id,{team_name:a.name,team_url:a.url}):oe({team_name:a.name,team_url:a.url})).then(c=>{C.success(f(a.id?"team.updateSuccess":"team.createSuccess")),a.visible=!1,_()}).catch(c=>{e.close()})},D=e=>{re({title:f("team.removeYourself"),message:f("team.removeNote")}).then(()=>{le(e.id).then(s=>{C.success(f("team.removeSuccess")),_()})}).catch(()=>{})},n=$({visible:!1,id:"",email:""}),F=e=>{n.visible=!0,n.id=e.id,n.email=""},S=()=>{ie(n.id,{email:n.email}).then(e=>{C.success(f("team.intiveSuccess")),n.visible=!1,_()})};return R(()=>{_()}),(e,s)=>{const c=Y,K=te,k=O,y=Z,T=ee,E=X;return u(),p(V,null,[t("div",de,[t("div",me,r(e.$t("team.team")),1),l(c,{type:"primary",onClick:B},{default:i(()=>[ce,g(" "+r(e.$t("team.createTeam")),1)]),_:1})]),t("div",ue,[(u(!0),p(V,null,N(h.value,o=>{var w;return u(),p("div",{class:"card",key:o},[t("div",pe,[t("div",_e,r(o.team_name),1),t("div",ve,[o.created_by===((w=A(z).state.userInfo)==null?void 0:w.username)?(u(),p("span",{key:0,class:"icon-button mr8",onClick:v=>U(o)},be,8,fe)):I("",!0),t("span",{class:"icon-button mr8",onClick:v=>F(o)},ye,8,he),t("span",{class:"icon-button",onClick:v=>D(o)},Ce,8,$e)])]),t("div",Se,[t("span",Te,r(e.$t("team.createdBy"))+":",1),t("span",null,r(o.created_by),1)]),t("div",Ee,[t("div",we,r(e.$t("team.members"))+":",1),t("div",Ne,[(u(!0),p(V,null,N(o.members,v=>(u(),p("p",{key:v},r(v.member_name)+"（"+r(v.email)+"）",1))),128))])])])}),128))]),h.value.length===0?(u(),p("div",Ie,Be)):I("",!0),l(K,{"hide-on-single-page":"",background:"",layout:"prev, pager, next",total:m.total,"page-size":m.pageSize,"onUpdate:pageSize":s[0]||(s[0]=o=>m.pageSize=o),"current-page":m.pageNum,"onUpdate:currentPage":s[1]||(s[1]=o=>m.pageNum=o),onSizeChange:_,onCurrentChange:_,class:"mt24 oa-pagination"},null,8,["total","page-size","current-page"]),l(E,{modelValue:a.visible,"onUpdate:modelValue":s[5]||(s[5]=o=>a.visible=o),title:a.id?e.$t("team.editTeam"):e.$t("team.createTeam"),width:"500",class:"oa-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:i(()=>[t("div",Ue,[Pe,t("div",null,[l(c,{onClick:s[4]||(s[4]=o=>a.visible=!1),text:"",bg:""},{default:i(()=>[g(r(e.$t("cancel")),1)]),_:1}),l(c,{type:"primary",disabled:!a.name,onClick:P},{default:i(()=>[g(r(e.$t("save")),1)]),_:1},8,["disabled"])])])]),default:i(()=>[l(T,{model:a,ref:"teamRef","label-position":"top","require-asterisk-position":"right","show-message":!1},{default:i(()=>[l(y,{label:e.$t("team.teamName"),prop:"name",required:""},{default:i(()=>[l(k,{placeholder:e.$t("team.teamNamePH"),modelValue:a.name,"onUpdate:modelValue":s[2]||(s[2]=o=>a.name=o),modelModifiers:{trim:!0},maxlength:"100"},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),l(y,{label:e.$t("team.url"),prop:"url"},{default:i(()=>[l(k,{placeholder:e.$t("team.urlPH"),modelValue:a.url,"onUpdate:modelValue":s[3]||(s[3]=o=>a.url=o),modelModifiers:{trim:!0},maxlength:"1000"},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(E,{modelValue:n.visible,"onUpdate:modelValue":s[9]||(s[9]=o=>n.visible=o),title:e.$t("team.intive"),width:"500",class:"oa-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:i(()=>[t("div",De,[Fe,t("div",null,[l(c,{onClick:s[8]||(s[8]=o=>n.visible=!1),text:"",bg:""},{default:i(()=>[g(r(e.$t("cancel")),1)]),_:1}),l(c,{type:"primary",disabled:!n.email,onClick:S},{default:i(()=>[g(r(e.$t("send")),1)]),_:1},8,["disabled"])])])]),default:i(()=>[l(T,{model:n,ref:"intiveRef","label-position":"top",onSubmit:s[7]||(s[7]=G(()=>{},["prevent"]))},{default:i(()=>[l(y,{label:e.$t("team.email"),prop:"email"},{default:i(()=>[l(k,{modelValue:n.email,"onUpdate:modelValue":s[6]||(s[6]=o=>n.email=o),modelModifiers:{trim:!0},placeholder:e.$t("team.emailPH"),onKeypress:J(S,["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}},Ze=j(Ke,[["__scopeId","data-v-3f716426"]]);export{Ze as default};
