import{_ as I,a0 as z,u as Y,a8 as M,a as $,r as R,o as F,b as _,c as m,d as o,a2 as i,w as s,bs as A,a3 as g,E as B,t as u,j as b,a4 as H,p as N,k as P}from"./index-c90bc775.js";import{a as j,E as L}from"./el-form-item-091f8ed7.js";import{E as T}from"./el-switch-be87da7f.js";import{E as p,a as Q}from"./Editor-358c199e.js";/* empty css                 */import{E as Z}from"./el-progress-f97ff985.js";import{m as G}from"./challenge-e8d85911.js";import"./castArray-2def1d6a.js";import"./_initCloneObject-d01ac546.js";import"./flatten-c41bc7f7.js";import"./index-066c6226.js";import"./isEqual-44e6bdeb.js";const U=c=>(N("data-v-38f27f05"),c=c(),P(),c),O={class:"container"},W={class:"container-main mb24"},J=["src"],K={key:1,class:"avatar-uploader-icon"},X={class:"icon",style:{"font-size":"24px"},"aria-hidden":"true"},ee=U(()=>o("use",{"xlink:href":"#icon-chuangjian"},null,-1)),ae=[ee],le={class:"mt24"},te={class:"flex-between",style:{width:"100%"}},ie={class:"flex-between",style:{width:"100%"}},de={class:"flex-center"},se={class:"inline-title"},oe={class:"flex-center"},ne={class:"inline-title"},re={class:"note ml16"},ue={class:"icon","aria-hidden":"true",style:{"font-size":"12px"}},pe=U(()=>o("use",{"xlink:href":"#icon-zhushi"},null,-1)),_e=[pe],me={__name:"AddChallenge",setup(c){const{t:f}=z(),h=Y(),v=M(),e=$({id:void 0,title:"",short_description:"",description:"",evaluation_details:"",terms_and_conditions:"",image:"",submission_guidelines:"",leaderboard_description:"",evaluation_script:"",remote_evaluation:!1,is_docker_based:!1,start_date:"",end_date:"",queue:"",queue_aws_region:"",manual_participant_approval:!1,published:!1}),E=a=>{if(a.raw.type.startsWith("image/")){if(a.raw.size/1024/1024>5)return g.error("Picture size can not exceed 5MB!"),!1}else return g.error("Please select a picture!"),!1;e.image=a.raw,e.imageUrl=URL.createObjectURL(a.raw)},V=R(),r=(a,l,n)=>{!l||l=="<p><br></p>"?n(new Error(a.field+" is required")):n()},k=$({title:[{required:!0,message:"title is required",trigger:"blur"},{min:3,max:100,message:"Length should be 3 to 100",trigger:"blur"}],short_description:[{validator:r,trigger:"blur"}],description:[{validator:r,trigger:"blur"}],evaluation_details:[{validator:r,trigger:"blur"}],terms_and_conditions:[{validator:r,trigger:"blur"}],submission_guidelines:[{validator:r,trigger:"blur"}],leaderboard_description:[{validator:r,trigger:"blur"}],queue:[{required:!0,message:"Queue is required",trigger:"blur"}],queue_aws_region:[{required:!0,message:"Queue aws region is required",trigger:"blur"}]}),D=async a=>{a&&await a.validate((l,n)=>{if(l){let t=new FormData;t.append("title",e.title),t.append("short_description",e.short_description),t.append("description",e.description),t.append("evaluation_details",e.evaluation_details),t.append("terms_and_conditions",e.terms_and_conditions),t.append("submission_guidelines",e.submission_guidelines),t.append("leaderboard_description",e.leaderboard_description),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("queue",e.queue),t.append("queue_aws_region",e.queue_aws_region),t.append("manual_participant_approval",e.manual_participant_approval),t.append("published",e.published),t.append("image",e.image),e.id&&t.append("id",e.id),A(t).then(w=>{g.success(e.id!==void 0?f("addChall.updateSuccess"):f("addChall.createSuccess")),h.push("/host")})}})},S=()=>{h.push("/host")};return F(()=>{v.params.challengeId!==void 0&&G(v.params.challengeId).then(a=>{e.title=a.title,e.short_description=a.short_description,e.description=a.description,e.evaluation_details=a.evaluation_details,e.terms_and_conditions=a.terms_and_conditions,e.submission_guidelines=a.submission_guidelines,e.leaderboard_description=a.leaderboard_description,e.start_date=a.start_date,e.end_date=a.end_date,e.queue=a.queue,e.queue_aws_region=a.queue_aws_region,e.manual_participant_approval=a.manual_participant_approval,e.published=a.published,e.id=a.id,e.image=a.image})}),(a,l)=>{const n=H,t=L,w=Z,q=Q,C=T,x=j,y=B;return _(),m("div",O,[o("div",W,[i(x,{ref_key:"ruleFormRef",ref:V,model:e,rules:k,"label-width":"200px","label-position":"top",size:"default","status-icon":"","hide-required-asterisk":""},{default:s(()=>[i(t,{label:a.$t("addChall.title"),prop:"title"},{default:s(()=>[i(n,{modelValue:e.title,"onUpdate:modelValue":l[0]||(l[0]=d=>e.title=d),maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.shortDesc"),prop:"short_description"},{default:s(()=>[i(p,{modelValue:e.short_description,"onUpdate:modelValue":l[1]||(l[1]=d=>e.short_description=d)},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.desc"),prop:"description"},{default:s(()=>[i(p,{modelValue:e.description,"onUpdate:modelValue":l[2]||(l[2]=d=>e.description=d)},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.evaluation"),prop:"evaluation_details"},{default:s(()=>[i(p,{modelValue:e.evaluation_details,"onUpdate:modelValue":l[3]||(l[3]=d=>e.evaluation_details=d)},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.termsConditions"),prop:"terms_and_conditions"},{default:s(()=>[i(p,{modelValue:e.terms_and_conditions,"onUpdate:modelValue":l[4]||(l[4]=d=>e.terms_and_conditions=d)},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.image"),prop:"image"},{default:s(()=>[i(w,{class:"avatar-uploader",name:"image","show-file-list":!1,"on-change":E,"auto-upload":!1},{default:s(()=>[e.image?(_(),m("img",{key:0,src:e.imageUrl||e.image,class:"avatar"},null,8,J)):(_(),m("span",K,[(_(),m("svg",X,ae)),o("span",le,u(a.$t("addChall.imagePH")),1)]))]),_:1})]),_:1},8,["label"]),i(t,{label:a.$t("addChall.SubmiGuide"),prop:"submission_guidelines"},{default:s(()=>[i(p,{modelValue:e.submission_guidelines,"onUpdate:modelValue":l[5]||(l[5]=d=>e.submission_guidelines=d)},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.lbDesc"),prop:"leaderboard_description"},{default:s(()=>[i(p,{modelValue:e.leaderboard_description,"onUpdate:modelValue":l[6]||(l[6]=d=>e.leaderboard_description=d)},null,8,["modelValue"])]),_:1},8,["label"]),i(t,null,{default:s(()=>[o("div",te,[i(t,{label:a.$t("addChall.startDate"),prop:"start_date",required:""},{default:s(()=>[i(q,{modelValue:e.start_date,"onUpdate:modelValue":l[7]||(l[7]=d=>e.start_date=d),type:"datetime",placeholder:"Select date and time","value-format":"YYYY-MM-DDTHH:mm:ssZ",style:{width:"500px"}},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.endDate"),prop:"end_date",required:""},{default:s(()=>[i(q,{modelValue:e.end_date,"onUpdate:modelValue":l[8]||(l[8]=d=>e.end_date=d),type:"datetime",placeholder:"Select date and time","value-format":"YYYY-MM-DDTHH:mm:ssZ",style:{width:"500px"}},null,8,["modelValue"])]),_:1},8,["label"])])]),_:1}),i(t,null,{default:s(()=>[o("div",ie,[i(t,{label:a.$t("addChall.queue"),prop:"queue"},{default:s(()=>[i(n,{modelValue:e.queue,"onUpdate:modelValue":l[9]||(l[9]=d=>e.queue=d),maxlength:"200",style:{width:"500px"}},null,8,["modelValue"])]),_:1},8,["label"]),i(t,{label:a.$t("addChall.queueAwsRegion"),prop:"queue_aws_region"},{default:s(()=>[i(n,{modelValue:e.queue_aws_region,"onUpdate:modelValue":l[10]||(l[10]=d=>e.queue_aws_region=d),maxlength:"50",style:{width:"500px"}},null,8,["modelValue"])]),_:1},8,["label"])])]),_:1}),i(t,{prop:"manual_participant_approval"},{default:s(()=>[o("div",de,[o("span",se,u(a.$t("addChall.participantApproval")),1),i(C,{modelValue:e.manual_participant_approval,"onUpdate:modelValue":l[11]||(l[11]=d=>e.manual_participant_approval=d),size:"small"},null,8,["modelValue"])])]),_:1}),i(t,{prop:"published"},{default:s(()=>[o("div",oe,[o("span",ne,u(a.$t("addChall.published")),1),i(C,{modelValue:e.published,"onUpdate:modelValue":l[12]||(l[12]=d=>e.published=d),size:"small"},null,8,["modelValue"]),o("span",re,[(_(),m("svg",ue,_e)),b(" "+u(a.$t("addChall.publishNote")),1)])])]),_:1})]),_:1},8,["model","rules"])]),i(y,{style:{width:"180px","border-radius":"2px"},type:"primary",onClick:l[13]||(l[13]=d=>D(V.value))},{default:s(()=>[b(u(e.id?a.$t("save"):a.$t("create")),1)]),_:1}),i(y,{style:{width:"180px","border-radius":"2px"},onClick:l[14]||(l[14]=d=>S())},{default:s(()=>[b(u(a.$t("cancel")),1)]),_:1})])}}},Ue=I(me,[["__scopeId","data-v-38f27f05"]]);export{Ue as default};
